<!DOCTYPE html>
<html lang="en">
<head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-C4VRD1C9QS"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-C4VRD1C9QS');
  </script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <title>Top Sarkari Jobs | View</title>
  <meta name="description" content="Browse official pages, tools, and sections on Top Sarkari Jobs. Find latest Sarkari Jobs, results, admit cards, and online forms." />
  <meta name="keywords" content="top sarkari jobs, sarkari result, govt jobs, admit card, online form, government jobs 2026" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" id="canonical-link" href="https://www.topsarkarijobs.com/view.html" />
  <link rel="icon" type="image/x-icon" href="image.ico">

  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root{ --muted-bg:#f8fafc; }
    html,body{height:100%;}
    body{background:var(--muted-bg); color:#0f172a;}
  </style>
</head>

<body>
  <div class="min-h-screen flex flex-col">

    <header class="bg-gradient-to-r from-sky-600 to-indigo-600 text-white shadow-sm relative z-50">
      <div class="container mx-auto max-w-6xl px-4 py-4">

        <div class="flex items-center gap-4">
          <div class="flex items-center gap-3 shrink-0">
            <img src="image.png" alt="Top Sarkari Jobs Logo" class="h-10 w-10 rounded-full">
            <div class="leading-tight">
              <h1 class="text-2xl font-bold">Top Sarkari Jobs</h1>
              <p class="text-xs md:text-sm text-sky-200">
                Latest Sarkari Jobs, Results, Admit Cards &amp; Online Forms – 2026
              </p>
            </div>
          </div>

          <button id="mobile-menu-toggle" class="lg:hidden text-white hover:bg-blue-700 p-2 rounded ml-auto" aria-label="Open menu">
            <i class="fas fa-bars"></i>
          </button>

          <div class="hidden lg:flex items-center gap-3 flex-1 justify-end min-w-0">
            <nav class="flex items-center gap-3 flex-wrap">
              <a href="index.html" class="px-3 py-2 bg-white text-sky-600 rounded-md font-semibold shadow-sm hover:shadow-md transition">
                <i class="fas fa-briefcase mr-2"></i>Home
              </a>
              <a href="result.html" class="px-3 py-2 bg-white/10 backdrop-blur-sm text-white rounded-md font-semibold hover:bg-white/20 transition">
                <i class="fas fa-clipboard-check mr-2"></i>Results
              </a>
              <a href="search.html" class="px-3 py-2 bg-white/10 backdrop-blur-sm text-white rounded-md font-semibold hover:bg-white/20 transition">
                <i class="fas fa-search mr-2"></i>Search
              </a>
              <a href="govt-services.html" class="px-3 py-2 bg-white/10 backdrop-blur-sm text-white rounded-md font-semibold hover:bg-white/20 transition">
                <i class="fas fa-gavel mr-2"></i>CSC Services
              </a>
              <a href="tools.html" class="px-3 py-2 bg-white/10 backdrop-blur-sm text-white rounded-md font-semibold hover:bg-white/20 transition">
                <i class="fas fa-tools mr-2"></i>Tools
              </a>
              <a href="helpdesk.html" class="px-3 py-2 bg-white/10 backdrop-blur-sm text-white rounded-md font-semibold hover:bg-white/20 transition">
                <i class="fas fa-headset mr-2"></i>Helpdesk
              </a>
            </nav>
            <div id="header-links" class="flex gap-2 flex-wrap justify-end"></div>
          </div>
        </div>

        <div id="mobile-menu" class="hidden lg:hidden absolute top-full left-0 right-0 bg-sky-600 text-white shadow-lg">
          <div class="flex flex-col p-4 space-y-2">
            <a href="index.html" class="px-4 py-2 bg-white text-sky-600 rounded-md font-semibold hover:bg-white/90 transition">
              <i class="fas fa-briefcase mr-2"></i>Home
            </a>
            <a href="result.html" class="px-4 py-2 bg-white/10 rounded-md font-semibold hover:bg-white/20 transition">
              <i class="fas fa-clipboard-check mr-2"></i>Results
            </a>
            <a href="search.html" class="px-4 py-2 bg-white/10 rounded-md font-semibold hover:bg-white/20 transition">
              <i class="fas fa-search mr-2"></i>Search
            </a>
            <a href="govt-services.html" class="px-4 py-2 bg-white/10 rounded-md font-semibold hover:bg-white/20 transition">
              <i class="fas fa-gavel mr-2"></i>CSC Services
            </a>
            <a href="tools.html" class="px-4 py-2 bg-white/10 rounded-md font-semibold hover:bg-white/20 transition">
              <i class="fas fa-tools mr-2"></i>Tools
            </a>
            <a href="helpdesk.html" class="px-4 py-2 bg-white/10 rounded-md font-semibold hover:bg-white/20 transition">
              <i class="fas fa-headset mr-2"></i>Helpdesk
            </a>
            <div id="header-links-mobile" class="mt-2 space-y-2"></div>
          </div>
        </div>

      </div>
    </header>

    <main class="flex-1 flex flex-col w-full relative">

      <div class="container mx-auto max-w-6xl px-4 pt-4 pb-2">
        <a href="index.html" class="inline-flex items-center gap-2 px-4 py-2 rounded-md bg-white border border-slate-200 hover:bg-slate-50 font-semibold text-slate-800 transition">
          <i class="fas fa-arrow-left"></i> Back to Home
        </a>
      </div>

      <section id="url-view" class="hidden flex-1 flex flex-col">
        <div class="container mx-auto max-w-6xl px-4 mb-4">
          <div class="bg-white rounded-lg border border-slate-200 p-4 shadow-sm">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
              <div>
                <h2 id="url-title" class="text-xl md:text-2xl font-bold text-slate-900">View</h2>
                <p class="text-slate-600 text-xs md:text-sm">
                  If the page below is blank, use the "Open in new tab" button.
                </p>
              </div>

              <div class="flex flex-wrap gap-2">
                <a id="open-official" href="#" target="_blank" rel="noopener"
                   class="inline-flex items-center justify-center px-4 py-2 rounded-md bg-sky-600 hover:bg-sky-700 text-white font-semibold transition text-sm md:text-base">
                  <i class="fas fa-up-right-from-square mr-2"></i> Open in new tab
                </a>
              </div>
            </div>
          </div>
        </div>

        <div class="flex-1 w-full bg-white border-t border-slate-200 relative">
          <div class="w-full bg-slate-50 border-b border-slate-200 py-1 text-center text-[10px] md:text-xs text-slate-500">
             External Website View
          </div>
          <iframe id="url-iframe" title="Top Sarkari Jobs Viewer"
                  class="w-full"
                  style="height: 85vh; min-height: 600px;"
                  referrerpolicy="no-referrer"
                  loading="lazy"></iframe>
        </div>
      </section>

      <section id="section-view" class="hidden container mx-auto max-w-6xl px-4 pb-12">
        <div class="bg-white rounded-lg border border-slate-200 p-5">
          <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
            <div>
              <h2 id="page-title" class="text-2xl font-bold text-slate-900">Section</h2>
              <p id="page-subtitle" class="text-slate-600 mt-1">
                Browse all updates in this section.
              </p>
            </div>

            <div class="flex items-center gap-2">
              <label for="filterBox" class="text-sm font-semibold text-slate-700">Search:</label>
              <input id="filterBox" type="text" placeholder="Type to filter..."
                class="w-full md:w-72 px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-200" />
            </div>
          </div>
        </div>

        <section class="mt-5 bg-white rounded-lg border border-slate-200 p-5">
          <h3 class="text-lg font-bold text-slate-900">Latest Sarkari Jobs & Updates</h3>
          <p class="text-slate-700 mt-2 leading-relaxed text-sm">
            This page lists the latest Sarkari Jobs, government notifications, and online form updates.
            Always verify eligibility, important dates, and instructions on the official portal before applying.
          </p>

          <p class="text-slate-600 text-sm mt-3">
            Showing <span id="countNow">0</span> links.
          </p>

          <ul id="links-list" class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-3"></ul>

          <div id="loading" class="mt-6 text-center text-slate-600">
            <div class="inline-flex items-center gap-2 bg-slate-50 border border-slate-200 rounded-md px-4 py-3">
              <i class="fas fa-spinner fa-spin"></i>
              <span>Loading… Please wait</span>
            </div>
          </div>
        </section>
      </section>

      <section id="fallback" class="hidden container mx-auto max-w-6xl px-4">
        <div class="bg-white rounded-lg border border-amber-200 bg-amber-50 p-5 text-amber-900">
          We couldn’t find what to display. Please go back and open the section again.
        </div>
      </section>

    </main>

    <footer class="bg-white text-gray-800 py-8 mt-auto border-t border-slate-200">
      <div class="container mx-auto px-4">
        <div class="flex flex-col md:flex-row justify-between items-center">
          <div class="mb-4 md:mb-0">
            <h3 class="text-xl font-bold">Top Sarkari Jobs</h3>
            <p class="text-gray-600 text-sm mt-1">Your gateway to government jobs and services</p>

            <div class="mt-3 flex flex-wrap gap-3 text-sm">
              <a class="text-sky-600 hover:underline" href="about.html">About</a>
              <a class="text-sky-600 hover:underline" href="contact.html">Contact</a>
              <a class="text-sky-600 hover:underline" href="privacy.html">Privacy</a>
              <a class="text-sky-600 hover:underline" href="terms.html">Terms</a>
            </div>
          </div>

          <div class="flex flex-wrap gap-3" id="footer-social-links"></div>
        </div>

        <div class="border-t border-gray-200 mt-6 pt-6 text-center text-gray-600 text-sm">
          <p>&copy; 2025 Top Sarkari Jobs. All rights reserved.</p>
        </div>
      </div>
    </footer>

    <div id="whatsapp-float" class="fixed bottom-6 right-6 z-50">
      <button id="whatsapp-btn" class="bg-green-500 hover:bg-green-600 text-white rounded-full w-16 h-16 flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-110" aria-label="Open WhatsApp chat">
        <i class="fab fa-whatsapp text-4xl"></i>
      </button>
    </div>

    <div id="whatsapp-popup" class="hidden fixed bottom-24 right-6 z-50 w-80 md:w-96 bg-white rounded-lg shadow-2xl overflow-hidden">
      <div class="bg-green-500 text-white p-4 flex items-center justify-between">
        <div class="flex items-center">
          <i class="fab fa-whatsapp text-2xl mr-3"></i>
          <div>
            <h3 class="font-bold text-lg">Top Sarkari Jobs</h3>
            <p class="text-xs text-green-100">Online</p>
          </div>
        </div>
        <button id="close-whatsapp" class="text-white hover:text-green-100 transition" aria-label="Close WhatsApp chat">
          <i class="fas fa-times text-xl"></i>
        </button>
      </div>

      <div id="whatsapp-messages" class="bg-gray-50 p-4 space-y-3 max-h-96 overflow-y-auto"></div>
    </div>

  </div>

  <script src="script.js"></script>

  <script>
    const toggleBtn = document.getElementById("mobile-menu-toggle");
    const mobileMenu = document.getElementById("mobile-menu");
    if(toggleBtn && mobileMenu){
      toggleBtn.addEventListener("click", () => {
        mobileMenu.classList.toggle("hidden");
      });
    }
  </script>

  <script>
    (function () {
      const urlParams = new URLSearchParams(window.location.search);
      const sectionParam = urlParams.get("section");
      const urlParam = urlParams.get("url");
      const qParam = urlParams.get("q") || urlParams.get("search") || "";
      const nameParam = urlParams.get("name") || "View";

      // canonical
      const canonical = document.getElementById("canonical-link");
      if (canonical) {
        const u = new URL("https://www.topsarkarijobs.com/view.html");
        urlParams.forEach((v, k) => u.searchParams.set(k, v));
        canonical.href = u.toString();
      }

      const urlView = document.getElementById("url-view");
      const sectionView = document.getElementById("section-view");
      const fallback = document.getElementById("fallback");

      function show(el){
        if(el) el.classList.remove("hidden");
      }


      // MODE C: site-wide search (q=...)
      if (qParam && qParam.toString().trim()) {
        show(sectionView);

        const queryRaw = decodeURIComponent(qParam).trim();
        const query = queryRaw.toLowerCase();

        document.title = `Search: ${queryRaw} | Top Sarkari Jobs`;

        const pageTitle = document.getElementById("page-title");
        const pageSubtitle = document.getElementById("page-subtitle");
        const linksList = document.getElementById("links-list");
        const loading = document.getElementById("loading");
        const filterBox = document.getElementById("filterBox");
        const countNow = document.getElementById("countNow");

        const topH3 = sectionView.querySelector("h3");
        const descP = sectionView.querySelector("p.text-slate-700");

        if (pageTitle) pageTitle.textContent = `Search: ${queryRaw}`;
        if (pageSubtitle) pageSubtitle.textContent = "Results across jobs, sections, tools, and site pages.";
        if (topH3) topH3.textContent = "Search results";
        if (descP) {
          descP.textContent =
            "These results are collected from the site’s saved listings (jobs, updates, tools). Always verify details on the official source before applying.";
        }

        function safeText2(s){ return (s || "").toString(); }

        function normalizeUrl2(raw){
          const s = safeText2(raw).trim();
          if (!s) return "";
          if (/^(https?:)?\/\//i.test(s) || /^(mailto:|tel:)/i.test(s)) return s;
          if (s.startsWith("#") || s.startsWith("?")) return s;
          if (s.startsWith("/") || s.endsWith(".html") || s.startsWith("./") || s.startsWith("../")) return s;
          return "https://" + s.replace(/^\/+/, "");
        }

        function asViewLink(name, url){
          const u = normalizeUrl2(url);
          if (!u) return "#";
          const isInternal = /(^[./]|^\/|\.html(\?|#|$))/i.test(u);
          if (isInternal) return u;
          return `view.html?url=${encodeURIComponent(u)}&name=${encodeURIComponent(name)}`;
        }

        async function tryFetch(path){
          try{
            const r = await fetch(path, { cache: "no-store" });
            if (!r.ok) return null;
            return await r.json();
          }catch(_){
            return null;
          }
        }

        function pushUnique(out, seen, item){
          const name = safeText2(item.name).trim();
          const url = safeText2(item.url).trim();
          if (!name || !url) return;
          const key = (name + "|" + url).toLowerCase();
          if (seen.has(key)) return;
          seen.add(key);
          out.push(item);
        }

        function matchesAllTokens(text, tokens){
          for(const t of tokens){
            if (!text.includes(t)) return false;
          }
          return true;
        }

        function render(items){
          linksList.innerHTML = items.map((it) => {
            const name = safeText2(it.name || "Result");
            const url = safeText2(it.url || "#");
            const href = asViewLink(name, url);
            const source = safeText2(it.source || "");
            return `
              <li class="border border-slate-200 rounded-lg hover:shadow-sm transition bg-white p-4">
                <a href="${href}" class="text-sky-700 font-semibold hover:underline">
                  ${name}
                </a>
                ${source ? `<div class="text-xs text-slate-500 mt-1">${source}</div>` : ``}
              </li>
            `;
          }).join("");
          if (countNow) countNow.textContent = String(items.length);
        }

        (async function load(){
          const tokens = query.split(/\s+/).filter(Boolean).slice(0, 6);

          const out = [];
          const seen = new Set();

          // 1) dynamic sections (homepage big sections)
          const dyn = await tryFetch("dynamic-sections.json");
          if (dyn && Array.isArray(dyn.sections)) {
            dyn.sections.forEach(sec => {
              const items = Array.isArray(sec.items) ? sec.items : [];
              items.forEach(it => {
                const name = safeText2(it.name || it.title);
                const url = safeText2(it.url || it.link);
                if (!name || !url) return;
                pushUnique(out, seen, { name, url, source: "Homepage updates" });
              });
            });
          }

          // 2) jobs.json (dropdown pages / categories)
          const jobs = await tryFetch("jobs.json");
          if (jobs) {
            const buckets = [];

            if (Array.isArray(jobs.top_jobs)) buckets.push({ label: "Jobs", arr: jobs.top_jobs });
            if (Array.isArray(jobs.left_jobs)) buckets.push({ label: "Jobs", arr: jobs.left_jobs });
            if (Array.isArray(jobs.right_jobs)) buckets.push({ label: "Jobs", arr: jobs.right_jobs });

            // alternative structure (groups/items)
            if (Array.isArray(jobs.groups)) {
              jobs.groups.forEach(g => {
                const items = Array.isArray(g.items) ? g.items : [];
                items.forEach(it => {
                  const name = safeText2(it.name || it.title);
                  const url = safeText2(it.url || it.link);
                  if (!name || !url) return;
                  pushUnique(out, seen, { name, url, source: "Jobs categories" });
                });
              });
            }

            buckets.forEach(b => {
              b.arr.forEach(it => {
                const name = safeText2(it.name || it.title);
                const url = safeText2(it.url || it.link);
                if (!name || !url) return;
                // skip headers (they often have title but no url)
                if (!safeText2(it.url || it.link).trim()) return;
                pushUnique(out, seen, { name, url, source: "Jobs categories" });
              });
            });
          }

          // 3) tools.json
          const tools = await tryFetch("tools.json");
          if (tools && typeof tools === "object") {
            Object.keys(tools).forEach(cat => {
              const arr = Array.isArray(tools[cat]) ? tools[cat] : [];
              arr.forEach(t => {
                const name = safeText2(t.name);
                const url = safeText2(t.url || t.link);
                if (!name || !url) return;
                pushUnique(out, seen, { name, url, source: "Tools" });
              });
            });
          }

          // 4) services.json (CSC Services list)
          const services = await tryFetch("services.json");
          if (services && Array.isArray(services.services)) {
            services.services.forEach(s => {
              const name = safeText2(s.name || s.service);
              if (!name) return;
              pushUnique(out, seen, { name, url: "govt-services.html", source: "CSC Services" });
            });
          }

          // Filter by query
          const filtered = out.filter(it => {
            const hay = (safeText2(it.name) + " " + safeText2(it.url) + " " + safeText2(it.source)).toLowerCase();
            return matchesAllTokens(hay, tokens);
          });

          // Sort: name length then alpha (simple)
          filtered.sort((a,b) => (safeText2(a.name).length - safeText2(b.name).length) || safeText2(a.name).localeCompare(safeText2(b.name)));

          if (loading) loading.classList.add("hidden");

          if (!filtered.length) {
            linksList.innerHTML = `
              <li class="border border-amber-200 bg-amber-50 rounded-lg p-4 text-amber-900">
                No results found for <strong>${queryRaw}</strong>. Try keywords like <em>SSC</em>, <em>Railway</em>, <em>Bank</em>, <em>Police</em>, <em>Admit Card</em>, <em>Result</em>.
              </li>
            `;
            if (countNow) countNow.textContent = "0";
          } else {
            render(filtered);
          }

          // live filter within the results
          if (filterBox) {
            filterBox.value = queryRaw;
            filterBox.addEventListener("input", function () {
              const q2 = filterBox.value.toLowerCase().trim();
              const tokens2 = q2.split(/\s+/).filter(Boolean).slice(0, 6);
              const f2 = filtered.filter(it => {
                const hay = (safeText2(it.name) + " " + safeText2(it.url) + " " + safeText2(it.source)).toLowerCase();
                return matchesAllTokens(hay, tokens2);
              });
              render(f2);
            });
          }
        })();

        return;
      }
      // MODE A: url viewer (restores original tool/job behavior)
      if (urlParam) {
        show(urlView);

        const decodedUrl = decodeURIComponent(urlParam);
        const decodedName = decodeURIComponent(nameParam);

        document.title = `${decodedName} | Top Sarkari Jobs`;

        const h = document.getElementById("url-title");
        if (h) h.textContent = decodedName;

        const openBtn = document.getElementById("open-official");
        if (openBtn) openBtn.href = decodedUrl;

        const iframe = document.getElementById("url-iframe");
        if (iframe) iframe.src = decodedUrl;

        return;
      }

      // MODE B: section list
      if (sectionParam) {
        show(sectionView);

        const decodedSection = decodeURIComponent(sectionParam).trim();
        const prettyTitle = decodedSection
          ? decodedSection.replace(/\b\w/g, c => c.toUpperCase())
          : "Updates";

        document.title = `${prettyTitle} | Top Sarkari Jobs`;

        const pageTitle = document.getElementById("page-title");
        const pageSubtitle = document.getElementById("page-subtitle");
        const linksList = document.getElementById("links-list");
        const loading = document.getElementById("loading");
        const filterBox = document.getElementById("filterBox");
        const countNow = document.getElementById("countNow");

        if (pageTitle) pageTitle.textContent = prettyTitle;
        if (pageSubtitle) pageSubtitle.textContent = "Browse all links in this section. Click any item to open details.";

        function safeText(s){ return (s || "").toString(); }

        function render(items){
          linksList.innerHTML = items.map((it) => {
            const name = safeText(it.name || it.title || "Update");
            const url = safeText(it.url || it.link || "#");
            return `
              <li class="border border-slate-200 rounded-lg hover:shadow-sm transition bg-white p-4">
                <a href="${url}" class="text-sky-700 font-semibold hover:underline" rel="noopener">
                  ${name}
                </a>
                <p class="text-sm text-slate-600 mt-2">
                  Check eligibility, important dates, and apply online through the official notification.
                </p>
              </li>
            `;
          }).join("");
          if (countNow) countNow.textContent = String(items.length);
        }

        async function load(){
          try{
            const res = await fetch("dynamic-sections.json", { cache: "no-store" });
            const data = await res.json();
            const sections = Array.isArray(data.sections) ? data.sections : [];

            const match =
              sections.find(s => safeText(s.id).toLowerCase() === decodedSection.toLowerCase()) ||
              sections.find(s => safeText(s.title).toLowerCase() === decodedSection.toLowerCase()) ||
              null;

            if (!match || !Array.isArray(match.items)) {
              if (loading) loading.classList.add("hidden");
              show(fallback);
              return;
            }

            const allItems = match.items;
            if (loading) loading.classList.add("hidden");
            render(allItems);

            if (filterBox) {
              filterBox.addEventListener("input", function () {
                const q = filterBox.value.toLowerCase().trim();
                const filtered = allItems.filter(it =>
                  safeText(it.name || it.title || "").toLowerCase().includes(q)
                );
                render(filtered);
              });
            }
          } catch(e){
            if (loading) loading.classList.add("hidden");
            show(fallback);
          }
        }

        load();
        return;
      }

      // fallback
      show(fallback);
    })();
  </script>

</body>
</html>
