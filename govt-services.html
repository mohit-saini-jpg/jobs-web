<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CSC Services & Government Schemes - Top Sarkari Jobs</title>
  <meta name="description" content="Apply for CSC services and government schemes. Explore service links and resources on Top Sarkari Jobs." />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://www.topsarkarijobs.com/govt-services.html" />
  <link rel="icon" type="image/x-icon" href="image.ico">
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
  <a class="skip-link" href="#main">Skip to content</a>

  <header class="site-header">
    <div class="container header-row">
      <a class="brand" href="index.html" aria-label="Top Sarkari Jobs Home">
        <img src="image.png" alt="Top Sarkari Jobs Logo" class="brand-logo">
        <span class="brand-text">
          <span class="brand-title">Top Sarkari Jobs</span>
          <span class="brand-subtitle">Latest Sarkari Jobs, Results, Admit Cards & Online Forms – 2026</span>
        </span>
      </a>

      <nav class="desktop-nav" aria-label="Primary">
        <a class="nav-link" href="index.html">Home</a>
        <a class="nav-link" href="result.html">Results</a>
        <a class="nav-link" href="search.html">Search</a>
        <a class="nav-link" href="govt-services.html">CSC Services</a>
        <a class="nav-link" href="tools.html">Tools</a>
        <a class="nav-link" href="helpdesk.html">Helpdesk</a>

        <div class="nav-dd" data-dd>
          <button class="nav-link nav-dd-btn" type="button" aria-haspopup="true" aria-expanded="false">
            Jobs <i class="fa-solid fa-chevron-down"></i>
          </button>
          <div class="nav-dd-menu" role="menu">
            <a role="menuitem" href="category.html?group=study" class="nav-dd-item">Study wise jobs</a>
            <a role="menuitem" href="category.html?group=popular" class="nav-dd-item">Popular job categories</a>
            <a role="menuitem" href="category.html?group=state" class="nav-dd-item">State wise jobs</a>
          </div>
        </div>

        <div class="nav-dd" data-dd>
          <button class="nav-link nav-dd-btn" type="button" aria-haspopup="true" aria-expanded="false">
            Admissions <i class="fa-solid fa-chevron-down"></i>
          </button>
          <div class="nav-dd-menu" role="menu">
            <a role="menuitem" href="category.html?group=admissions" class="nav-dd-item">Admissions</a>
            <a role="menuitem" href="category.html?group=admit-result" class="nav-dd-item">Admit Card / Result / Answer Key / Syllabus</a>
          </div>
        </div>

        <div class="nav-dd" data-dd>
          <button class="nav-link nav-dd-btn" type="button" aria-haspopup="true" aria-expanded="false">
            More <i class="fa-solid fa-chevron-down"></i>
          </button>
          <div class="nav-dd-menu" role="menu">
            <a role="menuitem" href="category.html?group=khabar" class="nav-dd-item">Latest Khabar</a>
            <a role="menuitem" href="category.html?group=study-material" class="nav-dd-item">Study Material & Top Courses</a>
          </div>
        </div>

        <div id="header-links" class="header-cta"></div>
      </nav>

      <div class="header-actions">
        <button id="openSearchBtn" class="icon-btn" type="button" aria-label="Open search">
          <i class="fa-solid fa-magnifying-glass"></i>
        </button>
        <button id="menuBtn" class="icon-btn" type="button" aria-label="Open menu" aria-controls="mobileMenu" aria-expanded="false">
          <i class="fa-solid fa-bars"></i>
        </button>
      </div>
    </div>
  </header>

  <section class="top-search">
    <div class="container">
      <div class="search-card">
        <h2 class="search-title">Search across Top Sarkari Jobs</h2>
        <p class="search-sub">Search jobs, categories, tools and services.</p>
        <div class="search-row">
          <input id="siteSearchInput" type="search" placeholder="Search…" autocomplete="off" />
          <button id="siteSearchBtn" type="button" class="btn-primary">
            <i class="fa-solid fa-magnifying-glass"></i> Search
          </button>
        </div>
        <div id="searchResults" class="search-results" aria-live="polite"></div>
      </div>
    </div>
  </section>

  <main id="main" class="container page">
    <section class="seo-block">
      <h1 style="margin:0;">CSC Services</h1>
      <p>Apply for various government services and documents using trusted service links.</p>
    </section>

    <section class="seo-block">
      <h2>Service Request</h2>
      <div id="servicesList" class="section-list"></div>
    </section>

    <section class="seo-block">
      <h2>FAQs – CSC Services</h2>
      <div class="faq-item">
        <button type="button" class="faq-btn" aria-expanded="false">
          <span>Are these service links official?</span>
          <i class="fas fa-chevron-down"></i>
        </button>
        <div class="faq-panel" hidden>
          We list service links from trusted sources. Please confirm details on the service portal before submitting any request.
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-row">
      <div>
        <div class="footer-title">Top Sarkari Jobs</div>
        <div class="footer-sub">Your gateway to government jobs and services</div>
        <div class="footer-links">
          <a href="about.html">About</a>
          <a href="contact.html">Contact</a>
          <a href="privacy.html">Privacy</a>
          <a href="terms.html">Terms</a>
        </div>
      </div>
      <div id="footer-social-links" class="footer-social"></div>
    </div>
    <div class="container footer-bottom">
      © 2025 Top Sarkari Jobs. All rights reserved.
    </div>
  </footer>

  <div id="menuOverlay" class="overlay" hidden></div>
  <aside id="mobileMenu" class="offcanvas" aria-label="Mobile menu" hidden>
    <div class="offcanvas-head">
      <div class="offcanvas-title">Menu</div>
      <button id="closeMenuBtn" class="icon-btn" type="button" aria-label="Close menu">
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>

    <nav class="offcanvas-nav" aria-label="Mobile primary">
      <a href="index.html">Home</a>
      <a href="result.html">Results</a>
      <a href="search.html">Search</a>
      <a href="govt-services.html">CSC Services</a>
      <a href="tools.html">Tools</a>
      <a href="helpdesk.html">Helpdesk</a>

      <div class="offcanvas-group">
        <div class="offcanvas-group-title">Jobs</div>
        <a href="category.html?group=study">Study wise jobs</a>
        <a href="category.html?group=popular">Popular job categories</a>
        <a href="category.html?group=state">State wise jobs</a>
      </div>

      <div class="offcanvas-group">
        <div class="offcanvas-group-title">Admissions</div>
        <a href="category.html?group=admissions">Admissions</a>
        <a href="category.html?group=admit-result">Admit Card / Result / Answer Key / Syllabus</a>
      </div>

      <div class="offcanvas-group">
        <div class="offcanvas-group-title">More</div>
        <a href="category.html?group=khabar">Latest Khabar</a>
        <a href="category.html?group=study-material">Study Material & Top Courses</a>
      </div>

      <div class="offcanvas-cta" id="header-links-mobile"></div>
    </nav>
  </aside>
  (() => {
  "use strict";

  const $ = (s, r = document) => r.querySelector(s);
  const $$ = (s, r = document) => Array.from(r.querySelectorAll(s));
  const page = (location.pathname.split("/").pop() || "index.html").toLowerCase();

  const safe = (v) => (v ?? "").toString().trim();
  const escRE = (s) => s.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");

  // -------------------------
  // Header/footer links (from header_links.json)
  // -------------------------
  async function loadHeaderLinks() {
    let data = { header_links: [], social_links: [] };
    try {
      const r = await fetch("header_links.json", { cache: "no-store" });
      if (r.ok) data = await r.json();
    } catch (_) {}

    const desktop = $("#header-links");
    const mobile = $("#header-links-mobile");
    const footerSocial = $("#footer-social-links");

    const links = Array.isArray(data.header_links) ? data.header_links : [];
    const socials = Array.isArray(data.social_links) ? data.social_links : [];

    if (desktop) {
      desktop.innerHTML = "";
      links.forEach((l) => {
        const a = document.createElement("a");
        a.className = "nav-link";
        a.href = l.link || l.url || "#";
        a.target = "_blank";
        a.rel = "noopener";
        a.textContent = l.name || "Link";
        desktop.appendChild(a);
      });
    }

    if (mobile) {
      mobile.innerHTML = "";
      links.forEach((l) => {
        const a = document.createElement("a");
        a.href = l.link || l.url || "#";
        a.target = "_blank";
        a.rel = "noopener";
        a.textContent = l.name || "Link";
        mobile.appendChild(a);
      });
    }

    if (footerSocial) {
      footerSocial.innerHTML = "";
      socials.forEach((s) => {
        const a = document.createElement("a");
        a.className = "nav-link";
        a.href = s.url || "#";
        a.target = "_blank";
        a.rel = "noopener";
        a.textContent = s.name || "Social";
        footerSocial.appendChild(a);
      });
    }
  }

  // -------------------------
  // Offcanvas menu
  // -------------------------
  function initOffcanvas() {
    const btn = $("#menuBtn");
    const closeBtn = $("#closeMenuBtn");
    const menu = $("#mobileMenu");
    const overlay = $("#menuOverlay");

    if (!btn || !closeBtn || !menu || !overlay) return;

    const close = () => {
      menu.hidden = true;
      overlay.hidden = true;
      btn.setAttribute("aria-expanded", "false");
      document.body.style.overflow = "";
    };

    const open = () => {
      menu.hidden = false;
      overlay.hidden = false;
      btn.setAttribute("aria-expanded", "true");
      document.body.style.overflow = "hidden";
    };

    btn.addEventListener("click", open);
    closeBtn.addEventListener("click", close);
    overlay.addEventListener("click", close);

    menu.addEventListener("click", (e) => {
      const a = e.target.closest("a");
      if (a) close();
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") close();
    });

    window.addEventListener("resize", () => {
      if (window.innerWidth > 980) close();
    });

    window.__closeMenu = close;
  }

  // -------------------------
  // Desktop dropdowns (FIX: keep open while moving cursor into menu)
  // -------------------------
  function initDropdowns() {
    const dds = $$("[data-dd]");
    if (!dds.length) return;

    const timers = new WeakMap();

    const setOpen = (dd, yes) => {
      const btn = $(".nav-dd-btn", dd);
      const menu = $(".nav-dd-menu", dd);
      if (!btn || !menu) return;
      if (yes) {
        menu.classList.add("open");
        btn.setAttribute("aria-expanded", "true");
      } else {
        menu.classList.remove("open");
        btn.setAttribute("aria-expanded", "false");
      }
    };

    const closeAll = () => dds.forEach((dd) => setOpen(dd, false));

    const clearTimer = (dd) => {
      const t = timers.get(dd);
      if (t) clearTimeout(t);
      timers.delete(dd);
    };

    const delayedClose = (dd) => {
      clearTimer(dd);
      timers.set(
        dd,
        setTimeout(() => setOpen(dd, false), 180) // small grace time to move cursor
      );
    };

    dds.forEach((dd) => {
      const btn = $(".nav-dd-btn", dd);
      const menu = $(".nav-dd-menu", dd);
      if (!btn || !menu) return;

      btn.addEventListener("click", (e) => {
        e.preventDefault();
        const isOpen = menu.classList.contains("open");
        closeAll();
        if (!isOpen) setOpen(dd, true);
      });

      // Hover behavior (desktop only)
      const canHover = () => window.matchMedia("(hover:hover)").matches;

      dd.addEventListener("mouseenter", () => {
        if (!canHover()) return;
        clearTimer(dd);
        closeAll();
        setOpen(dd, true);
      });

      dd.addEventListener("mouseleave", () => {
        if (!canHover()) return;
        delayedClose(dd);
      });

      // Crucial: keep it open when cursor enters the menu itself
      menu.addEventListener("mouseenter", () => {
        if (!canHover()) return;
        clearTimer(dd);
        setOpen(dd, true);
      });

      menu.addEventListener("mouseleave", () => {
        if (!canHover()) return;
        delayedClose(dd);
      });
    });

    document.addEventListener("click", (e) => {
      if (!e.target.closest("[data-dd]")) closeAll();
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeAll();
    });
  }

  // -------------------------
  // FAQ accordion
  // -------------------------
  function initFAQ() {
    $$(".faq-btn").forEach((btn) => {
      btn.addEventListener("click", () => {
        const expanded = btn.getAttribute("aria-expanded") === "true";
        $$(".faq-btn").forEach((b) => {
          b.setAttribute("aria-expanded", "false");
          const p = b.parentElement.querySelector(".faq-panel");
          if (p) p.hidden = true;
        });
        if (!expanded) {
          btn.setAttribute("aria-expanded", "true");
          const p = btn.parentElement.querySelector(".faq-panel");
          if (p) p.hidden = false;
        }
      });
    });
  }

  // -------------------------
  // View helper
  // -------------------------
  function openInternal(url, name) {
    return `view.html?url=${encodeURIComponent(url)}&name=${encodeURIComponent(name)}`;
  }

  // -------------------------
  // Homepage big sections (dynamic-sections.json)
  // -------------------------
  async function renderHomepageSections() {
    const wrap = $("#dynamic-sections");
    if (!wrap) return;

    let data = { sections: [] };
    try {
      const r = await fetch("dynamic-sections.json", { cache: "no-store" });
      if (r.ok) data = await r.json();
    } catch (_) {}

    wrap.innerHTML = "";

    (data.sections || []).forEach((sec) => {
      const title = safe(sec.title) || "Updates";
      const color = safe(sec.color) || "#0284c7";
      const icon = safe(sec.icon) || "fa-solid fa-briefcase";

      const card = document.createElement("article");
      card.className = "section-card";
      card.innerHTML = `
        <div class="section-head" style="background:${color}">
          <div class="left">
            <i class="${icon}"></i>
            <span>${title}</span>
          </div>
        </div>
        <div class="section-body">
          <div class="section-list"></div>
          ${sec.viewMoreUrl ? `<a class="view-all" href="${openInternal(sec.viewMoreUrl, title)}">View All <i class="fa-solid fa-arrow-right"></i></a>` : ""}
        </div>
      `;

      const list = $(".section-list", card);
      const items = Array.isArray(sec.items) ? sec.items.slice(0, 8) : [];
      items.forEach((it) => {
        const name = safe(it.name) || "Open";
        const url = it.url || it.link || "";
        if (!url) return;

        const external = !!it.external;
        const a = document.createElement("a");
        a.className = "section-link";
        a.href = external ? url : openInternal(url, name);
        if (external) {
          a.target = "_blank";
          a.rel = "noopener";
        }

        a.innerHTML = `
          <div class="t">${name}</div>
          ${it.date ? `<div class="d">${safe(it.date)}</div>` : `<div class="d">Open official link</div>`}
        `;
        list.appendChild(a);
      });

      wrap.appendChild(card);
    });
  }

  // -------------------------
  // Category page (category.html)
  // -------------------------
  function normalizeGroup(g) {
    const v = (g || "").toLowerCase().trim();
    const map = {
      study: "study",
      "study-wise": "study",
      studywise: "study",
      popular: "popular",
      "popular-jobs": "popular",
      state: "state",
      "state-wise": "state",
      statewise: "state",
      admissions: "admissions",
      admission: "admissions",
      "admit-result": "admit-result",
      admitresult: "admit-result",
      khabar: "khabar",
      news: "khabar",
      "study-material": "study-material",
      courses: "study-material",
    };
    return map[v] || v || "study";
  }

  function groupMeta(group) {
    const meta = {
      study: {
        title: "Study wise jobs",
        desc: "Browse government job links by education level: 8th pass, 10th pass, 12th pass, ITI, diploma, graduation and more.",
      },
      popular: {
        title: "Popular job categories",
        desc: "Explore popular government job categories like SSC, Railway, Police, Bank, Teaching and more.",
      },
      state: {
        title: "State wise jobs",
        desc: "Find state-wise government job links and recruitment updates.",
      },
      admissions: {
        title: "Admissions",
        desc: "Admissions updates and official application links for universities, colleges and entrance exams.",
      },
      "admit-result": {
        title: "Admit Card / Result / Answer Key / Syllabus",
        desc: "Quick access to admit cards, results, answer keys and syllabus links from official sources.",
      },
      khabar: {
        title: "Latest Khabar",
        desc: "Latest news and updates related to jobs, exams and government announcements.",
      },
      "study-material": {
        title: "Study Material & Top Courses",
        desc: "Study resources, notes, preparation links and recommended courses for government exams.",
      },
    };
    return meta[group] || { title: "Category", desc: "Browse useful links and categories." };
  }

  async function renderCategoryPage() {
    if (page !== "category.html") return;

    const params = new URLSearchParams(location.search);
    const group = normalizeGroup(params.get("group"));

    const meta = groupMeta(group);
    const titleEl = $("#categoryTitle");
    const descEl = $("#categoryDesc");
    const crumb = $("#crumbText");
    if (titleEl) titleEl.textContent = meta.title;
    if (descEl) descEl.textContent = meta.desc;
    if (crumb) crumb.textContent = meta.title;

    document.title = `${meta.title} | Top Sarkari Jobs`;

    let jobs = null;
    try {
      const r = await fetch("jobs.json", { cache: "no-store" });
      if (r.ok) jobs = await r.json();
    } catch (_) {}

    const grid = $("#categoryGrid");
    const empty = $("#categoryEmpty");
    const filter = $("#categoryFilter");
    const clear = $("#clearCategoryFilter");
    if (!grid) return;

    if (!jobs) {
      grid.innerHTML = "";
      if (empty) empty.style.display = "block";
      return;
    }

    const pool = []
      .concat(Array.isArray(jobs.top_jobs) ? jobs.top_jobs : [])
      .concat(Array.isArray(jobs.left_jobs) ? jobs.left_jobs : [])
      .concat(Array.isArray(jobs.right_jobs) ? jobs.right_jobs : []);

    const matchers = {
      study: [/study/i],
      popular: [/popular/i],
      state: [/state/i],
      admissions: [/admission/i],
      "admit-result": [/admit/i, /result/i, /answer/i, /syllabus/i],
      khabar: [/khabar/i, /news/i],
      "study-material": [/study material/i, /course/i, /notes?/i],
    };

    const reList = matchers[group] || [/.*/];

    const blocks = [];
    let currentHeading = null;
    let items = [];

    const flush = () => {
      if (currentHeading && items.length) blocks.push({ heading: currentHeading, items: items.slice() });
      currentHeading = null;
      items = [];
    };

    for (const it of pool) {
      if (it && typeof it.title === "string") {
        flush();
        const h = safe(it.title);
        const ok = reList.some((re) => re.test(h));
        currentHeading = ok ? h : null;
        continue;
      }
      if (!currentHeading) continue;

      const name = safe(it.name);
      const url = it.url || it.link || "";
      if (!name || !url) continue;

      items.push({ name, url, external: !!it.external });
    }
    flush();

    const render = (blocksToRender, q = "") => {
      grid.classList.add("cat-grid");
      grid.innerHTML = "";

      if (!blocksToRender.length) {
        if (empty) empty.style.display = "block";
        return;
      }
      if (empty) empty.style.display = "none";

      const colorMap = {
        study: "#2563eb",
        popular: "#db2777",
        state: "#059669",
        admissions: "#f59e0b",
        "admit-result": "#ef4444",
        khabar: "#7c3aed",
        "study-material": "#0ea5e9",
      };
      const color = colorMap[group] || "#0284c7";

      blocksToRender.forEach((b) => {
        const card = document.createElement("article");
        card.className = "section-card";
        card.innerHTML = `
          <div class="section-head" style="background:${color}">
            <div class="left">
              <i class="fa-solid fa-layer-group"></i>
              <span>${safe(b.heading)}</span>
            </div>
          </div>
          <div class="section-body">
            <div class="section-list"></div>
          </div>
        `;

        const list = $(".section-list", card);
        b.items.forEach((x) => {
          const a = document.createElement("a");
          a.className = "section-link";
          const href = x.external ? x.url : openInternal(x.url, x.name);
          a.href = href;
          if (x.external) {
            a.target = "_blank";
            a.rel = "noopener";
          }

          const qSafe = safe(q);
          const name = qSafe
            ? safe(x.name).replace(new RegExp(`(${escRE(qSafe)})`, "ig"), "<mark>$1</mark>")
            : safe(x.name);

          a.innerHTML = `
            <div class="t">${name}</div>
            <div class="d">Open official link</div>
          `;
          list.appendChild(a);
        });

        grid.appendChild(card);
      });
    };

    render(blocks);

    if (filter) {
      filter.addEventListener("input", () => {
        const q = safe(filter.value).toLowerCase();
        if (!q) {
          render(blocks);
          return;
        }
        const filtered = blocks
          .map((b) => ({ heading: b.heading, items: b.items.filter((x) => safe(x.name).toLowerCase().includes(q)) }))
          .filter((b) => b.items.length);
        render(filtered, q);
      });
    }

    if (clear) {
      clear.addEventListener("click", () => {
        if (!filter) return;
        filter.value = "";
        render(blocks);
        filter.focus();
      });
    }
  }

  // -------------------------
  // CSC Services popup (govt-services.html)
  // -------------------------
  function initCscModal() {
    const modal = $("#cscModal");
    if (!modal) return;

    const overlay = $("#cscModalOverlay");
    const closeBtn = $("#cscModalClose");
    const form = $("#cscRequestForm");
    const serviceNameEl = $("#cscServiceName");
    const openLinkBtn = $("#cscOpenLink");
    const mailBtn = $("#cscMailBtn");

    let currentService = { name: "", url: "" };

    const close = () => {
      modal.hidden = true;
      overlay.hidden = true;
      document.body.style.overflow = "";
    };

    const open = (service) => {
      currentService = service || { name: "", url: "" };

      if (serviceNameEl) serviceNameEl.textContent = currentService.name || "Service";
      if (openLinkBtn) {
        openLinkBtn.disabled = !currentService.url;
        openLinkBtn.setAttribute("aria-disabled", String(!currentService.url));
      }

      modal.hidden = false;
      overlay.hidden = false;
      document.body.style.overflow = "hidden";

      // focus first input
      const first = form ? $("input, select, textarea", form) : null;
      if (first) setTimeout(() => first.focus(), 50);
    };

    // expose for services renderer
    window.__openCscModal = open;

    const onKey = (e) => {
      if (e.key === "Escape" && !modal.hidden) close();
    };

    if (overlay) overlay.addEventListener("click", close);
    if (closeBtn) closeBtn.addEventListener("click", close);
    document.addEventListener("keydown", onKey);

    if (openLinkBtn) {
      openLinkBtn.addEventListener("click", () => {
        if (!currentService.url) return;
        // keep your viewer behavior (internal) so nothing breaks
        window.open(openInternal(currentService.url, currentService.name), "_blank", "noopener");
      });
    }

    if (form) {
      form.addEventListener("submit", (e) => {
        e.preventDefault();

        const name = safe($("#cscFullName")?.value);
        const phone = safe($("#cscPhone")?.value);
        const state = safe($("#cscState")?.value);
        const msg = safe($("#cscMessage")?.value);

        const lines = [
          `CSC Service Request`,
          `Service: ${currentService.name || "-"}`,
          name ? `Name: ${name}` : null,
          phone ? `Phone: ${phone}` : null,
          state ? `State: ${state}` : null,
          msg ? `Details: ${msg}` : null,
        ].filter(Boolean);

        const body = encodeURIComponent(lines.join("\n"));

        // IMPORTANT: put your real email here
        const EMAIL_TO = "REPLACE_WITH_YOUR_EMAIL@example.com";
        const subject = encodeURIComponent(`CSC Service Request - ${currentService.name || "Service"}`);

        // If you haven't replaced email, just copy message to clipboard (fallback)
        if (EMAIL_TO.includes("REPLACE_WITH_YOUR_EMAIL")) {
          navigator.clipboard?.writeText(lines.join("\n")).catch(() => {});
          alert("Copied request message. Set your email in script.js (EMAIL_TO) to enable one-click email.");
        } else {
          window.location.href = `mailto:${EMAIL_TO}?subject=${subject}&body=${body}`;
        }

        close();
      });
    }

    if (mailBtn) {
      mailBtn.addEventListener("click", () => {
        if (!form) return;
        form.requestSubmit();
      });
    }
  }

  async function renderServicesPage() {
    if (page !== "govt-services.html") return;

    const list = $("#servicesList");
    if (!list) return;

    let data = null;
    try {
      const r = await fetch("services.json", { cache: "no-store" });
      if (r.ok) data = await r.json();
    } catch (_) {}

    const services = (data && (data.services || data)) || [];
    list.innerHTML = "";

    if (!Array.isArray(services) || !services.length) {
      list.innerHTML = `<div class="seo-block"><strong>No services found.</strong><p>Please check services.json.</p></div>`;
      return;
    }

    services.forEach((s) => {
      const name = safe(s.name || s.service);
      const url = s.url || s.link || "";
      if (!name) return;

      // Render as "button-like link" that opens modal instead of dead external link
      const a = document.createElement("a");
      a.className = "section-link csc-service-link";
      a.href = "#";
      a.setAttribute("role", "button");
      a.innerHTML = `
        <div class="t">${name}</div>
        <div class="d">Click to fill details & open service</div>
      `;

      a.addEventListener("click", (e) => {
        e.preventDefault();
        if (typeof window.__openCscModal === "function") {
          window.__openCscModal({ name, url });
        } else if (url) {
          // fallback (shouldn't happen)
          window.open(openInternal(url, name), "_blank", "noopener");
        }
      });

      list.appendChild(a);
    });
  }

  // -------------------------
  // Tools page (tools.html)
  // -------------------------
  async function renderToolsPage() {
    if (page !== "tools.html") return;

    const grid = $("#toolsGrid");
    if (!grid) return;

    let data = null;
    try {
      const r = await fetch("tools.json", { cache: "no-store" });
      if (r.ok) data = await r.json();
    } catch (_) {}

    grid.innerHTML = "";
    grid.classList.add("cat-grid");

    const buckets = [
      { key: "image", title: "Image Tools", color: "#0ea5e9" },
      { key: "pdf", title: "PDF Tools", color: "#4f46e5" },
      { key: "video", title: "Video Tools", color: "#db2777" },
    ];

    let any = false;

    buckets.forEach((b) => {
      const items = data && Array.isArray(data[b.key]) ? data[b.key] : [];
      if (!items.length) return;
      any = true;

      const card = document.createElement("article");
      card.className = "section-card";
      card.innerHTML = `
        <div class="section-head" style="background:${b.color}">
          <div class="left">
            <i class="fa-solid fa-wand-magic-sparkles"></i>
            <span>${b.title}</span>
          </div>
        </div>
        <div class="section-body">
          <div class="section-list"></div>
        </div>
      `;
      const list = $(".section-list", card);

      items.forEach((it) => {
        const name = safe(it.name);
        const url = it.url || it.link || "";
        if (!name || !url) return;

        const a = document.createElement("a");
        a.className = "section-link";
        a.href = it.external ? url : openInternal(url, name);
        if (it.external) {
          a.target = "_blank";
          a.rel = "noopener";
        }
        a.innerHTML = `<div class="t">${name}</div><div class="d">Open tool</div>`;
        list.appendChild(a);
      });

      grid.appendChild(card);
    });

    if (!any) {
      grid.innerHTML = `<div class="seo-block"><strong>No tools found.</strong><p>Please check tools.json.</p></div>`;
    }
  }

  // -------------------------
  // Site search
  // -------------------------
  let SEARCH_INDEX = [];
  let SEARCH_READY = false;

  async function buildSearchIndex() {
    if (SEARCH_READY) return;

    const out = [];

    try {
      const r = await fetch("dynamic-sections.json", { cache: "no-store" });
      if (r.ok) {
        const d = await r.json();
        (d.sections || []).forEach((sec) => {
          (sec.items || []).forEach((it) => {
            const title = safe(it.name);
            const url = it.url || it.link || "";
            if (!title || !url) return;
            out.push({
              title,
              meta: safe(sec.title) || "Updates",
              href: it.external ? url : openInternal(url, title),
              external: !!it.external,
            });
          });
        });
      }
    } catch (_) {}

    try {
      const r = await fetch("jobs.json", { cache: "no-store" });
      if (r.ok) {
        const j = await r.json();
        const pool = [...(j.top_jobs || []), ...(j.left_jobs || []), ...(j.right_jobs || [])];
        pool.forEach((it) => {
          if (it && it.title) return;
          const title = safe(it.name);
          const url = it.url || it.link || "";
          if (!title || !url) return;
          out.push({
            title,
            meta: "Jobs / Categories",
            href: it.external ? url : openInternal(url, title),
            external: !!it.external,
          });
        });
      }
    } catch (_) {}

    try {
      const r = await fetch("tools.json", { cache: "no-store" });
      if (r.ok) {
        const t = await r.json();
        ["image", "pdf", "video"].forEach((k) => {
          (t[k] || []).forEach((it) => {
            const title = safe(it.name);
            const url = it.url || it.link || "";
            if (!title || !url) return;
            out.push({
              title,
              meta: "Tools",
              href: it.external ? url : openInternal(url, title),
              external: !!it.external,
            });
          });
        });
      }
    } catch (_) {}

    try {
      const r = await fetch("services.json", { cache: "no-store" });
      if (r.ok) {
        const s = await r.json();
        const services = s.services || s || [];
        (services || []).forEach((it) => {
          const title = safe(it.name || it.service);
          if (!title) return;
          out.push({
            title,
            meta: "CSC Services",
            href: "govt-services.html",
            external: false,
          });
        });
      }
    } catch (_) {}

    const seen = new Set();
    SEARCH_INDEX = out.filter((x) => {
      const k = (x.title + "|" + x.href).toLowerCase();
      if (seen.has(k)) return false;
      seen.add(k);
      return true;
    });

    SEARCH_READY = true;
  }

  function debounce(fn, wait) {
    let t = null;
    return (...args) => {
      clearTimeout(t);
      t = setTimeout(() => fn(...args), wait);
    };
  }

  function initSearch() {
    const input = $("#siteSearchInput");
    const btn = $("#siteSearchBtn");
    const results = $("#searchResults");
    const openBtn = $("#openSearchBtn");

    if (!input || !btn || !results) return;

    const run = async () => {
      const q = safe(input.value);
      if (!q) {
        results.classList.remove("open");
        results.innerHTML = "";
        return;
      }

      await buildSearchIndex();

      const ql = q.toLowerCase();
      const matches = SEARCH_INDEX
        .filter((x) => x.title.toLowerCase().includes(ql) || x.meta.toLowerCase().includes(ql))
        .slice(0, 25);

      if (!matches.length) {
        results.classList.add("open");
        results.innerHTML = `
          <div class="result-item">
            <div>
              <div class="result-title">No results found</div>
              <div class="result-meta">Try a different keyword.</div>
            </div>
          </div>
        `;
        return;
      }

      const re = new RegExp(`(${escRE(q)})`, "ig");
      results.classList.add("open");
      results.innerHTML = matches
        .map((m) => {
          const title = safe(m.title).replace(re, "<mark>$1</mark>");
          return `
            <a class="result-item" href="${m.href}" ${m.external ? `target="_blank" rel="noopener"` : ""}>
              <div>
                <div class="result-title">${title}</div>
                <div class="result-meta">${safe(m.meta)}</div>
              </div>
              <div class="result-meta">${m.external ? "↗" : "→"}</div>
            </a>
          `;
        })
        .join("");
    };

    btn.addEventListener("click", run);
    input.addEventListener("input", debounce(run, 150));
    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") run();
      if (e.key === "Escape") {
        results.classList.remove("open");
        results.innerHTML = "";
        input.blur();
      }
    });

    document.addEventListener("click", (e) => {
      if (!e.target.closest(".search-card")) results.classList.remove("open");
    });

    if (openBtn) {
      openBtn.addEventListener("click", () => {
        input.scrollIntoView({ behavior: "smooth", block: "center" });
        setTimeout(() => input.focus(), 150);
      });
    }
  }

  // -------------------------
  // Boot
  // -------------------------
  document.addEventListener("DOMContentLoaded", async () => {
    await loadHeaderLinks();
    initOffcanvas();
    initDropdowns();
    initFAQ();
    initSearch();

    if (page === "index.html" || page === "") await renderHomepageSections();

    await renderCategoryPage();
    initCscModal();          // <-- NEW
    await renderServicesPage();
    await renderToolsPage();
  });
})();

  <script src="script.js?v=20260205"></script>
</body>
</html>
